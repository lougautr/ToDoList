{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from \"../API/todoAPI\";\nexport default function TodoLists() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var getTodo = function getTodo(Username, Token) {\n    React.createElement(TokenContext.Consumer, null, function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        token = _ref2[0],\n        setToken = _ref2[1];\n      return React.createElement(UsernameContext.Consumer, null, function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          username = _ref4[0],\n          setUsername = _ref4[1];\n        getTodoLists(Username, Token).then(function (data) {\n          setData(data);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      });\n    });\n  };\n  useEffect(function () {\n    if (data.length == 0) {\n      console.log('chargement initial');\n      setData(getTodo(Username, token));\n    }\n  }, [data]);\n  return React.createElement(TodoList, {\n    data: getTodo\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","TodoList","getTodoLists","TodoLists","data","setData","getTodo","Username","Token","token","setToken","username","setUsername","then","catch","err","console","log","length"],"sources":["/Users/antoninmontagne/Desktop/Info/L3/S5/AppClient/tp1/Screen/TodoListsScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from '../API/todoAPI'\n\n\nexport default function TodoLists() {\n  const [data, setData] = useState([]);\n\n  const getTodo = (Username, Token) => {\n    <TokenContext.Consumer>\n      {([token, setToken]) => (\n        <UsernameContext.Consumer>\n          {([username, setUsername]) => {\n            getTodoLists(Username, Token)\n            .then(data => {\n              setData(data);\n            }\n            )\n            .catch(err => {\n              console.log(err);\n            }\n            );\n          }}\n        </UsernameContext.Consumer>\n      )}\n    </TokenContext.Consumer>\n  }\n\n  useEffect(() => {\n   if(data.length == 0) {\n    console.log('chargement initial')\n    setData(getTodo(Username, token))\n    }\n  }, [data]);\n\n  return <TodoList data={getTodo} />;\n}\n\n/*const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  });*/\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,OAAOC,QAAQ;AACf,SAASC,YAAY;AAGrB,eAAe,SAASC,SAAS,GAAG;EAClC,gBAAwBH,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7BI,IAAI;IAAEC,OAAO;EAEpB,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIC,QAAQ,EAAEC,KAAK,EAAK;IACnC,oBAAC,YAAY,CAAC,QAAQ,QACnB;MAAA;QAAEC,KAAK;QAAEC,QAAQ;MAAA,OAChB,oBAAC,eAAe,CAAC,QAAQ,QACtB,iBAA6B;QAAA;UAA3BC,QAAQ;UAAEC,WAAW;QACtBV,YAAY,CAACK,QAAQ,EAAEC,KAAK,CAAC,CAC5BK,IAAI,CAAC,UAAAT,IAAI,EAAI;UACZC,OAAO,CAACD,IAAI,CAAC;QACf,CAAC,CACA,CACAU,KAAK,CAAC,UAAAC,GAAG,EAAI;UACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAClB,CAAC,CACA;MACH,CAAC,CACwB;IAAA,CAC5B,CACqB;EAC1B,CAAC;EAEDhB,SAAS,CAAC,YAAM;IACf,IAAGK,IAAI,CAACc,MAAM,IAAI,CAAC,EAAE;MACpBF,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjCZ,OAAO,CAACC,OAAO,CAACC,QAAQ,EAAEE,KAAK,CAAC,CAAC;IACjC;EACF,CAAC,EAAE,CAACL,IAAI,CAAC,CAAC;EAEV,OAAO,oBAAC,QAAQ;IAAC,IAAI,EAAEE;EAAQ,EAAG;AACpC"},"metadata":{},"sourceType":"module"}