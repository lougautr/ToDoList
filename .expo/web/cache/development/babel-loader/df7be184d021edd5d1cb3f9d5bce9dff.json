{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _readOnlyError from \"@babel/runtime/helpers/readOnlyError\";\nimport React, { useEffect, useState } from \"react\";\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from \"../API/todoAPI\";\nimport { TokenContext } from \"../Context/Context\";\nexport default function TodoLists() {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var getTodo = function getTodo(token, setData) {\n    '', _readOnlyError(\"setError\");\n    getTodoLists(token).then(function (data) {\n      setData(data);\n    }).catch(function (err) {\n      setError(err.message);\n    });\n  };\n  return React.createElement(TokenContext.Consumer, null, function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      token = _ref2[0],\n      setToken = _ref2[1];\n    return React.createElement(\"div\", null, React.createElement(\"h1\", null, \"TodoLists\"), React.createElement(\"button\", {\n      onClick: function onClick() {\n        return getTodo(token, setData);\n      }\n    }, \"Get TodoLists\"), data && data.map(function (todoList) {\n      return React.createElement(TodoList, {\n        key: todoList.id,\n        todoList: todoList\n      });\n    }));\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","TodoList","getTodoLists","TokenContext","TodoLists","data","setData","error","setError","getTodo","token","then","catch","err","message","setToken","map","todoList","id"],"sources":["/Users/antoninmontagne/Desktop/Info/L3/S5/AppClient/tp1/Screen/TodoListsScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from '../API/todoAPI'\n//import todoData from \"../Helpers/todoData\";\nimport { TokenContext } from \"../Context/Context\";\n\nexport default function TodoLists() {\n  const [data, setData] = useState();\n  const [error, setError] = useState('')\n\n  const getTodo = (token, setData) => {\n            setError = ('')\n            getTodoLists(token)\n            .then(data => {\n              setData(data);\n            }\n            )\n            .catch(err => {\n              setError(err.message)\n            })\n      }     \n\n  /*useEffect(() => {\n   if(data.length == 0) {\n    console.log('chargement initial');\n    <TokenContext.Consumer>\n      {([token, setToken])=> {\n        return (\n          getTodo(token)\n        )\n      }\n      }\n    </TokenContext.Consumer>\n          setData(getTodo())\n    }else{\n      console.log('chargement suivant');\n      const data2 = getTodo();\n      console.log(data2);\n    }\n  }, [data]);*/\n\n  return(\n    <TokenContext.Consumer>\n      {([token, setToken]) => {\n        return (\n          <div>\n            <h1>TodoLists</h1>\n            <button onClick={() => getTodo(token, setData)}>Get TodoLists</button>\n            {data && data.map((todoList) => (\n              <TodoList key={todoList.id} todoList={todoList} />\n            ))}\n          </div>\n  );\n      }}\n    </TokenContext.Consumer>\n  );\n}\n\n/*const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  });*/\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,OAAOC,QAAQ;AACf,SAASC,YAAY;AAErB,SAASC,YAAY;AAErB,eAAe,SAASC,SAAS,GAAG;EAClC,gBAAwBJ,QAAQ,EAAE;IAAA;IAA3BK,IAAI;IAAEC,OAAO;EACpB,iBAA0BN,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BO,KAAK;IAAEC,QAAQ;EAEtB,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIC,KAAK,EAAEJ,OAAO,EAAK;IACd,EAAE;IACdJ,YAAY,CAACQ,KAAK,CAAC,CAClBC,IAAI,CAAC,UAAAN,IAAI,EAAI;MACZC,OAAO,CAACD,IAAI,CAAC;IACf,CAAC,CACA,CACAO,KAAK,CAAC,UAAAC,GAAG,EAAI;MACZL,QAAQ,CAACK,GAAG,CAACC,OAAO,CAAC;IACvB,CAAC,CAAC;EACR,CAAC;EAqBL,OACE,oBAAC,YAAY,CAAC,QAAQ,QACnB,gBAAuB;IAAA;MAArBJ,KAAK;MAAEK,QAAQ;IAChB,OACE,iCACE,4CAAkB,EAClB;MAAQ,OAAO,EAAE;QAAA,OAAMN,OAAO,CAACC,KAAK,EAAEJ,OAAO,CAAC;MAAA;IAAC,mBAAuB,EACrED,IAAI,IAAIA,IAAI,CAACW,GAAG,CAAC,UAACC,QAAQ;MAAA,OACzB,oBAAC,QAAQ;QAAC,GAAG,EAAEA,QAAQ,CAACC,EAAG;QAAC,QAAQ,EAAED;MAAS,EAAG;IAAA,CACnD,CAAC,CACE;EAEV,CAAC,CACqB;AAE5B"},"metadata":{},"sourceType":"module"}