{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from \"../API/todoAPI\";\nimport { TokenContext } from \"../Context/Context\";\nexport default function TodoLists() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  var _useState5 = useState(React.createElement(TokenContext.Consumer, null, function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        token = _ref2[0],\n        setToken = _ref2[1];\n      return token;\n    })),\n    _useState6 = _slicedToArray(_useState5, 2),\n    token = _useState6[0],\n    setToken = _useState6[1];\n  var getTodo = function getTodo(token, setData) {\n    console.log(\"la\", token);\n    setError('');\n    getTodoLists(token).then(function (data) {\n      console.log(\"data\", data);\n      setData(data);\n    }).catch(function (err) {\n      setError(err.message);\n    });\n  };\n  useEffect(function () {\n    if (data.length == 0) {\n      console.log('chargement initial');\n      React.createElement(TokenContext.Consumer, null, function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          token = _ref4[0],\n          setToken = _ref4[1];\n        return getTodo(token, setData);\n      });\n    }\n  }, [data]);\n  return React.createElement(\"div\", null, React.createElement(\"h1\", null, \"TodoLists\"));\n}","map":{"version":3,"names":["React","useEffect","useState","TodoList","getTodoLists","TokenContext","TodoLists","data","setData","error","setError","token","setToken","getTodo","console","log","then","catch","err","message","length"],"sources":["/Users/antoninmontagne/Desktop/Info/L3/S5/AppClient/tp1/Screen/TodoListsScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport TodoList from \"../components/TodoList\";\nimport { getTodoLists } from '../API/todoAPI'\nimport { TokenContext } from \"../Context/Context\";\n\nexport default function TodoLists() {\n  const [data, setData] = useState([])\n  const [error, setError] = useState('')\n  const [token, setToken] = useState(\n    <TokenContext.Consumer>\n      {([token, setToken]) => {\n        return token\n      }}\n    </TokenContext.Consumer>\n  )\n\n  const getTodo = (token, setData) => {\n    console.log(\"la\", token)\n    setError('')\n    getTodoLists(token)\n    .then(data => {\n      console.log(\"data\", data)\n      setData(data);\n    }\n    )\n    .catch(err => {\n      setError(err.message)\n    })\n}  \n\n  useEffect(() => {\n    if (data.length == 0) {\n      console.log('chargement initial');\n      <TokenContext.Consumer>\n      {([token, setToken])=> {\n        return (\n          getTodo(token, setData)\n        )\n      }\n      }\n    </TokenContext.Consumer>\n      \n    }\n  }, [data])\n\nreturn(\n  <div>\n    <h1>TodoLists</h1>\n    </div>\n)\n}\n\n/*const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      backgroundColor: '#fff',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  });*/\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAElD,OAAOC,QAAQ;AACf,SAASC,YAAY;AACrB,SAASC,YAAY;AAErB,eAAe,SAASC,SAAS,GAAG;EAClC,gBAAwBJ,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA7BK,IAAI;IAAEC,OAAO;EACpB,iBAA0BN,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BO,KAAK;IAAEC,QAAQ;EACtB,iBAA0BR,QAAQ,CAChC,oBAAC,YAAY,CAAC,QAAQ,QACnB,gBAAuB;MAAA;QAArBS,KAAK;QAAEC,QAAQ;MAChB,OAAOD,KAAK;IACd,CAAC,CACqB,CACzB;IAAA;IANMA,KAAK;IAAEC,QAAQ;EAQtB,IAAMC,OAAO,GAAG,SAAVA,OAAO,CAAIF,KAAK,EAAEH,OAAO,EAAK;IAClCM,OAAO,CAACC,GAAG,CAAC,IAAI,EAAEJ,KAAK,CAAC;IACxBD,QAAQ,CAAC,EAAE,CAAC;IACZN,YAAY,CAACO,KAAK,CAAC,CAClBK,IAAI,CAAC,UAAAT,IAAI,EAAI;MACZO,OAAO,CAACC,GAAG,CAAC,MAAM,EAAER,IAAI,CAAC;MACzBC,OAAO,CAACD,IAAI,CAAC;IACf,CAAC,CACA,CACAU,KAAK,CAAC,UAAAC,GAAG,EAAI;MACZR,QAAQ,CAACQ,GAAG,CAACC,OAAO,CAAC;IACvB,CAAC,CAAC;EACN,CAAC;EAEClB,SAAS,CAAC,YAAM;IACd,IAAIM,IAAI,CAACa,MAAM,IAAI,CAAC,EAAE;MACpBN,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;MACjC,oBAAC,YAAY,CAAC,QAAQ,QACrB,iBAAsB;QAAA;UAApBJ,KAAK;UAAEC,QAAQ;QAChB,OACEC,OAAO,CAACF,KAAK,EAAEH,OAAO,CAAC;MAE3B,CAAC,CAEqB;IAExB;EACF,CAAC,EAAE,CAACD,IAAI,CAAC,CAAC;EAEZ,OACE,iCACE,4CAAkB,CACZ;AAEV"},"metadata":{},"sourceType":"module"}