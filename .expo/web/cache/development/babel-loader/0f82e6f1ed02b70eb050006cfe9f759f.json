{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport TodoItem from \"./TodoItem\";\nimport Input from \"./UI/Input\";\nimport ProgressBar from \"./ProgressBar\";\nexport default function TodoList(props) {\n  var _useState = useState(props.data),\n    _useState2 = _slicedToArray(_useState, 2),\n    todoData = _useState2[0],\n    setData = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    ab = _useState4[0],\n    setAB = _useState4[1];\n  useEffect(function () {\n    setData(props.data);\n    setTodos(props.data);\n    setTodosSave(props.data);\n    setCount(props.data.filter(function (item) {\n      return item.done;\n    }).length);\n    setTotal(props.data.length);\n  }, [props.data]);\n  var _useState5 = useState(todoData.filter(function (item) {\n      return item.done;\n    }).length),\n    _useState6 = _slicedToArray(_useState5, 2),\n    count = _useState6[0],\n    setCount = _useState6[1];\n  var _useState7 = useState(todoData),\n    _useState8 = _slicedToArray(_useState7, 2),\n    todos = _useState8[0],\n    setTodos = _useState8[1];\n  var _useState9 = useState(todoData),\n    _useState10 = _slicedToArray(_useState9, 2),\n    todosSave = _useState10[0],\n    setTodosSave = _useState10[1];\n  var _useState11 = useState(0),\n    _useState12 = _slicedToArray(_useState11, 2),\n    total = _useState12[0],\n    setTotal = _useState12[1];\n  var countDone = function countDone(done) {\n    if (done == false) {\n      setCount(count + 1);\n    } else {\n      setCount(count - 1);\n    }\n  };\n  var deleteTodo = function deleteTodo(id) {\n    var newTodos = todos.filter(function (item) {\n      return item.id != id;\n    });\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n    setTotal(newTodos.length);\n  };\n  var addNewTodo = function addNewTodo(texte, id) {\n    var newTodos = [].concat(_toConsumableArray(todos), [{\n      id: id,\n      title: texte,\n      done: false\n    }]);\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setTotal(newTodos.length);\n  };\n  function showInprocess() {\n    setTodos(todosSave.filter(function (item) {\n      return item.done == false;\n    }));\n  }\n  var showDone = function showDone() {\n    setTodos(todosSave.filter(function (item) {\n      return item.done == true;\n    }));\n  };\n  var checkAll = function checkAll() {\n    var newTodos = todosSave.map(function (item) {\n      item.done = true;\n      return item;\n    });\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n  };\n  var uncheckAll = function uncheckAll() {\n    var newTodos = todosSave.map(function (item) {\n      item.done = false;\n      return item;\n    });\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter(function (item) {\n      return item.done;\n    }).length);\n  };\n  console.log(\"total a\", total);\n  return React.createElement(View, {\n    style: styles.view\n  }, React.createElement(Text, {\n    style: styles.titre\n  }, \"My TodoList\"), React.createElement(Text, null, \"Filtrer par : \"), React.createElement(View, {\n    style: styles.filter\n  }, React.createElement(Button, {\n    className: styles.button,\n    title: \"todos en cours\",\n    onPress: function onPress() {\n      return showInprocess();\n    }\n  }), React.createElement(Button, {\n    style: styles.button,\n    title: \"todos faites\",\n    onPress: function onPress() {\n      return showDone();\n    }\n  }), React.createElement(Button, {\n    title: \"tous les todos\",\n    onPress: function onPress() {\n      return setTodos(todosSave);\n    }\n  })), React.createElement(Text, null, \"Cocher/d\\xE9cocher\"), React.createElement(View, {\n    style: styles.filter\n  }, React.createElement(Button, {\n    title: \"cocher toutes les todos\",\n    onPress: function onPress() {\n      return checkAll();\n    }\n  }), React.createElement(Button, {\n    title: \"d\\xE9cocher toutes les todos\",\n    onPress: function onPress() {\n      return uncheckAll();\n    }\n  })), React.createElement(View, {\n    style: styles.items\n  }, React.createElement(FlatList, {\n    style: styles.liste,\n    data: todos,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(TodoItem, {\n        token: props.token,\n        item: item,\n        setCountDone: countDone,\n        delete: deleteTodo\n      });\n    }\n  })), React.createElement(Input, {\n    token: props.token,\n    username: props.username,\n    addNewTodo: addNewTodo\n  }), React.createElement(ProgressBar, {\n    count: count,\n    total: total,\n    ab: ab\n  }), React.createElement(Text, null, count, \" items ont \\xE9t\\xE9 r\\xE9alis\\xE9s\"));\n}\nvar styles = StyleSheet.create({\n  view: {\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    flex: 1\n  },\n  titre: {\n    fontSize: 30,\n    textAlign: \"center\",\n    marginTop: 20,\n    marginBottom: 20,\n    fontWeight: \"bold\"\n  },\n  filter: {\n    marginBottom: 10,\n    gap: 10,\n    flexFlow: \"row wrap\",\n    justifyContent: 'center'\n  },\n  liste: {\n    paddingTop: 10,\n    width: \"100%\",\n    flex: 1\n  },\n  items: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 10\n  },\n  Button: {\n    fontSize: 10\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","TodoItem","Input","ProgressBar","TodoList","props","data","todoData","setData","ab","setAB","setTodos","setTodosSave","setCount","filter","item","done","length","setTotal","count","todos","todosSave","total","countDone","deleteTodo","id","newTodos","addNewTodo","texte","title","showInprocess","showDone","checkAll","map","uncheckAll","console","log","styles","view","titre","button","items","liste","token","username","StyleSheet","create","backgroundColor","alignItems","justifyContent","flexDirection","flex","fontSize","textAlign","marginTop","marginBottom","fontWeight","gap","flexFlow","paddingTop","width","Button"],"sources":["/Users/antoninmontagne/Desktop/Info/L3/S5/AppClient/tp1/components/TodoList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  StyleSheet,\n  View,\n  TextInput,\n  Button,\n  Text,\n  FlatList,\n  Switch,\n} from \"react-native\";\n\nimport TodoItem from \"./TodoItem\";\nimport Input from \"./UI/Input\";\nimport ProgressBar from \"./ProgressBar\";\n\n\nexport default function TodoList(props) {\n  const [todoData, setData] = useState(props.data);\n  const [ab, setAB] = useState(0);\n\n  useEffect(() => {\n    setData(props.data);\n    setTodos(props.data);\n    setTodosSave(props.data);\n    setCount(props.data.filter((item) => item.done).length);\n     setTotal(props.data.length);\n}, [props.data]);\n\n\n  const [count, setCount] = useState(\n    todoData.filter((item) => item.done).length\n  );\n\n  const [todos, setTodos] = useState(todoData);\n  const [todosSave, setTodosSave] = useState(todoData);\n  const [total, setTotal] = useState(0);\n\n  const countDone = (done) => {\n    if (done == false) {\n      setCount(count + 1);\n    } else {\n      setCount(count - 1);\n    }\n  };\n\n  const deleteTodo = (id) => {\n    const newTodos = todos.filter(item => item.id != id);\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter((item) => item.done).length);\n    setTotal(newTodos.length);\n  };\n\n  const addNewTodo = (texte, id) => {\n    const newTodos = [...todos, { id: id, title: texte, done: false }];\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setTotal(newTodos.length);\n  };\n\n  function showInprocess() {\n    setTodos(todosSave.filter((item) => item.done == false));\n  }\n\n  const showDone = () => {\n    setTodos(todosSave.filter((item) => item.done == true));\n  };\n\n  const checkAll = () => {\n    const newTodos = todosSave.map((item) => {\n      item.done = true;\n      return item;\n    });\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter((item) => item.done).length);\n  };\n\n  const uncheckAll = () => {\n    const newTodos = todosSave.map((item) => {\n      item.done = false;\n      return item;\n    });\n    setTodos(newTodos);\n    setTodosSave(newTodos);\n    setCount(newTodos.filter((item) => item.done).length);\n  };\n\n  console.log(\"total a\", total);\n\n  return (\n    <View style={styles.view}>\n      <Text style={styles.titre}>My TodoList</Text>\n      <Text>Filtrer par : </Text>\n      <View style={styles.filter}>\n        <Button\n          className={styles.button}\n          title=\"todos en cours\"\n          onPress={() => showInprocess()}\n        />\n        <Button\n          style={styles.button}\n          title=\"todos faites\"\n          onPress={() => showDone()}\n        />\n        <Button title=\"tous les todos\" onPress={() => setTodos(todosSave)} />\n      </View>\n\n      <Text>Cocher/décocher</Text>\n      <View style={styles.filter}>\n        <Button title=\"cocher toutes les todos\" onPress={() => checkAll()} />\n        <Button\n          title=\"décocher toutes les todos\"\n          onPress={() => uncheckAll()}\n        />\n      </View>\n\n      <View style={styles.items}>\n      <FlatList\n        style={styles.liste}\n        data={todos}\n        renderItem={({ item }) => (\n          <TodoItem token={props.token} item={item} setCountDone={countDone} delete={deleteTodo}/>\n        )}\n      />\n      </View>\n      <Input token={props.token} username={props.username} addNewTodo={addNewTodo} />\n      <ProgressBar count={count} total={total} ab={ab}/>\n      <Text>{count} items ont été réalisés</Text>\n    </View>\n      );\n}\n\nconst styles = StyleSheet.create({\n    view: {\n        backgroundColor: '#fff',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        flex: 1,\n    },\n  titre: {\n    fontSize: 30,\n    textAlign: \"center\",\n    marginTop: 20,\n    marginBottom: 20,\n    fontWeight: \"bold\",\n  },\n  filter: {\n    marginBottom: 10,\n    gap: 10,\n    flexFlow: \"row wrap\",\n    justifyContent: 'center',\n  },\n  liste: {\n    paddingTop: 10,\n    width: \"100%\",\n    flex: 1,\n    },\n    items: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n        gap: 10,\n    },\n    Button: {\n      fontSize: 10,\n    }\n\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}